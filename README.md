# jene

A very simple experimental code gen tool

### To Run the App

Clone the REPO and run the below command

```
go run main.go

```

### Example Usage

```json
{
  "instructions": [
    "pkg:home.go:main",
    "f-start:sayHi:string:name,string salutation,string",
    "declare:email:int:i*1",
    "f-end",
    "f-start:sayBye:string:name,string salutation,string",
    "declare:friend:string:longtimefriend",
    "f-end"
  ]
}
```

Above input produces the below output in the home.go file

```go

// Code generated by go generate; DO NOT EDIT.
// This file was generated by JENE at 2020-07-12 20:24:20.153386 +0300 EAT m=+33.909365423
package main

func sayHi(name string, salutation string) string {
	email := 1
}

func sayBye(name string, salutation string) string {
	friend := "longtimefriend"
}

```

The instructions and input are separated by a ":" symbol . Endgoal is to be able to send json input to
an endpoint and receive a file with the codified response.

### Example Usage in Code

```go
func main() {
    jen := internal.InstantiateBuilder("trying.go", "main")
	// Adding imports
	jen.Use("fmt")
	jen.Use("strings")
	// Commiting imports
	jen.FlushUse()

	// Params. Function input params
	params := orderedmap.NewOrderedMap()
	for _, arg := range vals {
		splitString := strings.SplitN(arg, ",", 2)
		params.Set(fmt.Sprintf("%s", splitString[0]), splitString[1])
	}
	f := internal.NewFunc("test", "int", params)

	// Declare function variables
	f.Declare("book", "string", "")
	f.Declare("otherbook", "string", "Dirty Code")

	//Loop Range
	f.LRange("_", "arg", `strings.Split(otherbook, " ")`)
	f.State(jen.Log("arg", "This is not fun"))
	f.EndLRange()

	f.State(jen.Log("book", "Well hello there"), "return 0")

	// End of the function and Commit writes to file
	f.End()
	jen.Commit(f)

	//Building a struct
	rd := make(map[string]interface{})
	rd["home"] = "string"
	rd["away"] = "int"
	sbuilder := &internal.StructBuilder{}
	sbuilder.DeclareStruct("Fun", rd)
	jen.Commit(sbuilder)
}

```

Above code produces the below output

```go
// Code generated by go generate; DO NOT EDIT.
// This file was generated by JENE at 2020-07-12 21:40:23.092217 +0300 EAT m=+0.000978136
package main


import (
	"fmt"
	"strings"
)

func test(Arctic int,Southen string,Indian int,Atlantic string,Pacific int) int {
	var book string
	otherbook := "Dirty Code"
	for _, arg := range strings.Split(otherbook, " ") {
		fmt.Printf("This is not fun %v",arg)
	}
	fmt.Printf("Well hello there %v",book)
	return 0
}

type Fun struct {
	home	string
	away	int
}

```
